@model ProjektBazyDanych.Food

@{
	ViewBag.Title = "Szczegóły";
	Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Szczegóły</h1>

<div>
	<h4>Jedzenie</h4>

	<hr />
	<div class="row">
		<div class="col-sm-2">
			<dt>
				@Html.DisplayNameFor(model => model.name)
			</dt>

    <dd>
        @Html.DisplayFor(model => model.name)
    </dd>
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.requirement)
        </dt>

			<dd>
				@Html.DisplayFor(model => model.requirement)
			</dd>
		</div>
		<div class="col-sm-10">
			<dt>
				Gatunki, które to jedzą:
			</dt>
			<dd>
				<table class="table table-dark table-striped">

					<tr>
						@{var spiece = Model.Spieces.FirstOrDefault();
							<th>
								@Html.DisplayNameFor(model => spiece.name)
							</th>
							<th>
								@Html.DisplayNameFor(model => spiece.appetite)
							</th>
							<th>
								@Html.DisplayNameFor(model => spiece.howMany)
							</th>
							<th></th>
						}
					</tr>
					@foreach (var item in Model.Spieces)
					{
						<tr>
							<td>
								@Html.DisplayFor(modelItem => item.name)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.appetite)
							</td>
							<td>
								@Html.DisplayFor(modelItem => item.howMany)
							</td>
							<td>
								@Html.ActionLink("Szczegóły", "Details", "Spieces", new { id = item.name }, new { @class = "white-link" }) 
							</td>
						</tr>
					}
				</table>
			</dd>
			<dt>
				Dostawy danego pożywienia:
			</dt>
			<dd>
				@{var shipments = Model.Shipments.FirstOrDefault();

					<table class="table table-dark table-striped">
						<tr>
							<th>
								@Html.DisplayNameFor(model => shipments.id)
							</th>
							<th>
								@Html.DisplayNameFor(model => shipments.shipmentDate)
							</th>
							<th>
								@Html.DisplayNameFor(model => shipments.amount)
							</th>
							<th>
								@Html.DisplayNameFor(model => shipments.Settlement.shipmentId)
							</th>
							<th>
								@Html.DisplayNameFor(model => shipments.Supplier.name)
							</th>
							<th></th>
						</tr>

						@foreach (var item in Model.Shipments)
						{
							<tr>
								<td>
									@Html.DisplayFor(modelItem => item.id)
								</td>
								<td>
									@Html.DisplayFor(modelItem => item.shipmentDate)
								</td>
								<td>
									@Html.DisplayFor(modelItem => item.amount)
								</td>
								<td>
									@Html.DisplayFor(modelItem => item.Settlement.shipmentId)
								</td>
								<td>
									@Html.DisplayFor(modelItem => item.Supplier.name)
								</td>
								<td>
									@Html.ActionLink("Szczegóły", "Details", new { id = item.id }, new { @class = "white-link" })
								</td>
							</tr>
						}

					</table>
				}
			</dd>
		</div>
	</div>
</div>
<hr />
<p>
    @Html.ActionLink("Edytuj", "Edit", new { id = Model.name }, new {@class="btn btn-dark"}) 
    @Html.ActionLink("Aktualizuj zapotrzebowanie", "CountFood", new { name = Model.name }, new {@class="btn btn-dark"}) |
    @Html.ActionLink("Powrót do listy", "Index", null,new { @class = "btn " })
</p>
